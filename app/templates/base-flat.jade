mixin accountLinks
  li
    a.account-dropdown-item(href="/user/#{me.getSlugOrID()}", data-i18n="nav.profile")
  li
    a.account-dropdown-item(href="/account/settings", data-i18n="play.settings")
  if me.isAdmin() || !(me.isTeacher() || me.isStudent() || me.freeOnly())
    li
      a.account-dropdown-item(href="/account/payments", data-i18n="account.payments")
  if me.isAdmin() || !(me.isTeacher() || me.isStudent() || me.freeOnly()) || me.hasSubscription()
    li
      a.account-dropdown-item(href="/account/subscription", data-i18n="account.subscription")
  if me.isAdmin()
    li
      a.account-dropdown-item(href="/admin", data-i18n="account_settings.admin")
  if serverSession && serverSession.amActually
    li
      a.account-dropdown-item#nav-stop-spying-button Stop Spying
  if !features.codePlay
    li
      a.account-dropdown-item#logout-button(data-i18n="login.log_out")

.style-flat
  block header
    nav#main-nav.navbar.navbar-default.navbar-fixed-top.text-center
      .container-fluid.container
        .row
          .col-md-12
            .navbar-header
              button.navbar-toggle.collapsed(data-toggle='collapse', data-target='#navbar-collapse' aria-expanded='false')
                span.sr-only(data-i18n="nav.toggle_nav")
                span.icon-bar
                span.icon-bar
                span.icon-bar
              a.navbar-brand(href="/home")
                if serverConfig.codeNinjas
                  img#logo-img.code-ninjas-powered-by(src="/images/pages/base/logo.png")
                  img.code-ninjas-logo(src="/images/pages/base/code-ninjas-logo-right.png")
                else
                  img#logo-img(src="/images/pages/base/logo.png")
            if !serverConfig.static
              #navbar-collapse.collapse.navbar-collapse
                .nav-spacer
                ul.nav.navbar-nav
                  li
                    a.text-p(href="/about", data-i18n="nav.about")
                  if me.isStudent()
                    li
                      a.text-p(href="/students", data-i18n="nav.my_courses")
                  if !me.isAnonymous() && me.isTeacher()
                    li
                      a.text-p(href="/teachers/classes", data-i18n="nav.my_classrooms")
                  if !me.isAnonymous() && !me.isStudent() && !me.isTeacher()
                    li
                      a.text-p(href="/play", data-i18n="common.play")
                    li
                      a.text-p(href=view.forumLink(), data-i18n="nav.forum")

                if !me.isAnonymous()
                  ul.nav.navbar-nav
                    li.dropdown
                      a.dropdown-toggle.text-p(href="#", data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false")
                        span(data-i18n="nav.my_account")
                        span.caret
                      ul.dropdown-menu
                        li.user-dropdown-header.text-center.hidden-xs.hidden-sm
                          a(href="/user/#{me.getSlugOrID()}")
                            span.text-p= me.broadName()
                        +accountLinks

                ul.nav.navbar-nav
                  li.dropdown
                    a.dropdown-toggle.text-p(href="#", data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false")
                      span.language-dropdown-current Language
                      span.caret
                    ul.dropdown-menu.language-dropdown

                if me.isAnonymous()
                  ul.nav.navbar-nav.text-p.login-buttons
                    li
                      a#create-account-link.signup-button Sign Up
                    li
                      a#login-link.login-button Login

  block page_nav

  block outer_content
    #site-content-area
      block content
        p If this is showing, you dun goofed

  block footer
    .container-fluid
      #footer.small
        .container
          .row
            .col-lg-12
              .row
                .col-lg-3
                  h3 General
                  ul.list-unstyled
                    li
                      a(href="/about", data-i18n="nav.about")
                    li
                      a(href="/about#careers", data-i18n="nav.careers")
                    if !me.isStudent()
                      li
                        a.contact-modal(tabindex=-1, data-i18n="nav.contact")
                    li
                      a(href="/parents", data-i18n="nav.parent")
                    li
                      a(href="http://blog.codecombat.com/", data-i18n="nav.blog")
                    if features.china
                      li 京ICP备16061132号
                .col-lg-3
                  if !me.isStudent()
                    h3 Educators
                    ul.list-unstyled
                      li
                        a(href="/teachers/resources/faq", data-i18n="teacher.educator_faq")
                      li
                        a(href="/teachers/resources", data-i18n="nav.resource_hub")
                      li
                        a(href="/apcsp", data-i18n="nav.apcsp")
                      li
                        a(href="/teachers/classes", data-i18n="nav.my_classrooms")
                .col-lg-3
                  h3 Get Involved
                  ul.list-unstyled
                    li
                      a(href='/community', data-i18n="nav.community")
                    li
                      a(href="/play/ladder", data-i18n="game_menu.multiplayer_tab")
                    li
                      a(href="https://github.com/codecombat/codecombat") GitHub
                    if !me.isStudent()
                      li
                        a(href=view.forumLink(), data-i18n="nav.forum")
                .col-lg-3
                  if me.useSocialSignOn()
                    h3 Follow Us
                    div.social-buttons
                      a(href="https://www.youtube.com/channel/UCEl7Rs_jtl3hcbnp0xZclQA")
                        img(src="/images/pages/base/youtube_symbol_button.png", width="40")
                      a(href="https://twitter.com/codecombat")
                        img(src="/images/pages/base/twitter_logo_button.png", width="40")
                      a(href="https://www.facebook.com/codecombat")
                        img(src="/images/pages/base/facebook_logo_button.png", width="40")

              #final-footer(dir="ltr")
                img(src="/images/pages/base/logo.png" alt="CodeCombat")
                span(data-i18n="nav.copyright_prefix")
                span= ' ©2019 CodeCombat Inc. '
                span.spl(data-i18n="nav.copyright_suffix")
                a.spl.small(href="/legal") Terms of Service
                a.spl.small(href="/privacy") Privacy
